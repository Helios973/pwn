## 堆利用

### 函数

#### malloc():分配所需要的内存空间，并且返回一个指向他的指针

函数原型:

```c
void* malloc(size_t size);
```

参数size要分配的字节大小，是无符号数，如果你输入了-1，理论上会有一个很大很大的堆，实际上会报错，原因是他确实很大

返回值：如果分配成功，则返回指向分配内存的指针；如果分配失败，则返回null。

---

#### calloc():分配所需的内存空间，并返回一个（一组）指向它和它们的指针

malloc和calloc之间的不同点是，malloc不会清除内存中的值，因此内存中的值还是存在的，而calloc会设置分配的内存为零。

函数原型：

```c
void *calloc(size_t nitems, size_t size)
```

参数nitems：需要的堆块数量，也是无符号数。

返回值：如果分配成功，则返回分配堆块的指针；如果分配失败，则返回null

---

#### realloc():更改已经配置的内存空间，即更改由malloc（）函数分配的内存空间的大小。

函数原型：

```c
void *realloc(void *ptr,size_t size)
```

参数*ptr：一个指针，指向堆块或者为空

返回值：

1.如果重新申请的大小大于申请的内存空间的大小，且当前内存段后面有需要内存空间，则直接扩展这段内存空间，realloc将返回原指针

2.如果重新申请的大小大于申请内存的大小且当前内存段后面的空闲字节不够，那么就使用堆中的第一个能够满足这一要去的内存块，将目前的数据复制到更新的位置，相当于free+malloc

3.如果重新申请的大小小于申请内存的大小，堆块会直接缩小，被削减的内存会释放

```
注意
```

4.如果传入一个空的堆块地址，但是size不是0，那么就相当于malloc函数

5.如果传入的是一个正常的堆块地址，但是size为0那么就相当于free

6.如果申请失败，将返回null,此时，原来的指针仍然有效

---

#### free():用于释放之前调用的calloc、malloc或者reaalloc所分配的内存地址空间

函数原型：

```c
void free(void *ptr);
```

参数ptr：指针指向一个要释放内存的内存块。如果传递的参数是一个空指针，则不会执行任何动作，注意free不会清楚内存块中的数据。

无返回值